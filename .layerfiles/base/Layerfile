#This is an example webapp.io configuration for NodeJS
FROM vm/ubuntu:18.04
# To note: Layerfiles create VMs, *not* containers!

MEMORY 4G

# Install node
RUN curl -sL https://deb.nodesource.com/setup_14.x | bash && \
    apt install nodejs && \
    rm -f /etc/apt/sources.list.d/nodesource.list

RUN apt update
RUN apt-get install libgtk2.0-0 libgtk-3-0 libgbm-dev libnotify-dev libgconf-2-4 libnss3 libxss1 libasound2 libxtst6 xauth xvfb

COPY / /root

RUN npm install -g http-server

RUN npm install mocha mochawesome mochawesome-merge mochawesome-report-generator

RUN npm install

RUN BACKGROUND npm start
EXPOSE WEBSITE http://localhost:8080

SKIP REMAINING IF GIT_COMMIT_TITLE =~ ^([skip-deploy]|[skip-tests])$

RUN echo Hi!

RUN echo Hello!
